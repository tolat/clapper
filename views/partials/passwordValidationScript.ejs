<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms=document.querySelectorAll('.needs-validation')

        // Add password verification
        let pwElt=document.getElementById('InputPassword')
        let vpwElt=document.getElementById('VerifyPassword')
        if (pwElt&&vpwElt) {
            vpwElt.addEventListener('change', function (e) {
                pwElt.value!=vpwElt.value?
                    this.setCustomValidity("Passwords don't match!"):
                    this.setCustomValidity("")
            })

            pwElt.addEventListener('change', function (e) {
                let setDefault=true
                // Make sure password is at least 7 characters long
                if (pwElt.value.length<7) {
                    let feedback="Password must be minimum 7 characters"
                    this.setCustomValidity(feedback)
                    document.getElementById('password-validity-feedback').innerHTML=feedback

                    setDefault=false
                }

                // Make sure password has one letter and one number
                let hasLetter=false
                let hasNumber=false
                for (let c of pwElt.value.split('')) {
                    if ('qwertyuiopasdfghjklzxcvbnm'.split('').includes(c)) {
                        hasLetter=true
                    }
                    if ('1234567890'.split('').includes(c)) {
                        hasNumber=true
                    }
                }

                if (!hasNumber||!hasLetter) {
                    let feedback="Password must contain at least one letter and one number"
                    this.setCustomValidity(feedback)
                    document.getElementById('password-validity-feedback').innerHTML=feedback
                    setDefault=false
                }

                if (setDefault) {
                    document.getElementById('password-validity-feedback').innerHTML=""
                    this.setCustomValidity("")
                }
            })

            // Loop over them and prevent submission
            Array.from(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }

                        form.classList.add('was-validated')
                    }, false)
                })
        }
    })()

</script>